@import "abstracts/variables";
@import "abstracts/mixins";

/* ==========================
   NAV BAR (light)
   ========================== */

.nav-bar {
  width: 100%;
  height: $navbar-height;
  padding: 0 2rem;
  background-color: $bg-color;
  color: $text-color;
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: fixed;
  top: 0;
  z-index: 1000;
  box-shadow: 0 0 10px rgba($secondary-color, 0.2);
  flex-wrap: wrap;

  @media (max-width: $breakpoint-md) { padding: 0 0.5rem; }

  .navbar-brand {
    font-family: $font-family-base;
    font-size: $font-size-lg;
    font-weight: bold;
    @include gold-gradient-text;
  }

  .nav-bar-nav {
    display: flex;
    gap: 2rem;
    list-style: none;
    margin: 0;
    padding: 0;
    align-items: center;
    flex-wrap: wrap;

    li { position: relative; }

    /* Link w top-nav – bez extendów, z lokalnym resetem gradientu */
    li a {
      font: 600 $font-size-xs $font-family-base;
      padding: .35rem .5rem;
      color: $text-color;
      text-decoration: none;
      background-color: transparent;
      /* wyłącz „kreskę”/pseudo z globalnych linków */
      &::after { content: none; }
      /* neutralizuj globalny gold-gradient w stanie bazowym */
      background-image: none;
      -webkit-background-clip: border-box;
      background-clip: border-box;
      -webkit-text-fill-color: currentColor;
      transition: background-color $transition-fast, color $transition-fast;

      /* desktop: złote tło + ciemny tekst */
      @media (hover:hover) and (pointer:fine) {
        &:hover,
        &:focus {
          /* najpierw ubij gradient z globalnego a:hover */
          background-image: none;
          -webkit-background-clip: border-box;
          background-clip: border-box;
          -webkit-text-fill-color: currentColor;

          background-color: $text-color;
          color: $bg-color;
          text-decoration: none;
        }
      }

      &:focus-visible {
        background-image: none;
        -webkit-background-clip: border-box;
        background-clip: border-box;
        -webkit-text-fill-color: currentColor;

        background-color: $text-color;
        color: $bg-color;
        outline: 0;
        border-radius: 4px;
      }

      /* mobile: bez efektu hover */
      @media (hover:none), (pointer:coarse) {
        &:hover, &:active {
          background-color: transparent;
          color: $text-color;
        }
      }
    }

    @media (max-width: $breakpoint-md) { display: none; }
  }

  /* ==========================
     Dropdown w top-nav
     ========================== */

  .nav-bar-nav .dropdown-menu {
    background-color: $bg-color;
    border: 0;
    box-shadow: none;
    border-radius: 0 0 $border-radius $border-radius;
    margin-top: .25rem;
    min-width: 12rem;
    z-index: 1001;
    background-clip: padding-box;

    &[data-popper-placement^="top"] {
      border-radius: $border-radius $border-radius 0 0;
      margin-top: 0;
      margin-bottom: .25rem;
    }
  }

  .nav-bar-nav .dropdown-item {
    padding: .5rem 1.25rem;
    color: $primary-color;
    border-radius: 0;
    text-decoration: none;
    transition: background $transition-fast, color $transition-fast;

    @media (hover:hover) and (pointer:fine) {
      &:hover,
      &:focus { background-color: $hover-color; color: $bg-color; }
    }
    &:focus-visible { background-color: $hover-color; color: $bg-color; outline: 0; }

    @media (hover:none), (pointer:coarse) {
      &:hover, &:active { background-color: transparent; color: $primary-color; }
    }
  }

  /* ==========================
     Mobile toolbar
     ========================== */
  .nav-bar-mobile {
    display: none;

    @media (max-width: $breakpoint-md) {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-left: auto;
      padding-right: 1rem;

      .user-menu { cursor: pointer; }
      .offcanvas-toggle {
        background: none; border: 0; padding: 0; cursor: pointer;
        img {
          width: 32px; height: 32px; filter: $icon-filter;
          transition: transform $transition-fast;
          &:hover { transform: rotate(20deg); }
        }
      }
    }
  }

  .d20-icon { transition: transform .2s ease-in-out; }
  .d20-icon.spin { transform: rotate(360deg); }
}
