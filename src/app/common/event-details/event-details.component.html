@if (vm().event) {
<section class="event-details-section">
  <div class="container">
    <h2 class="section-title text-center">{{ vm().event?.name }}</h2>
    @if (vm().event?.singleDate && vm().isArchive) {
    <ngb-alert type="danger" class="w-100 text-center">
      UWAGA! Wydarzenie archiwalne!
    </ngb-alert>
    } @if (vm().cover.hasImage) {
    <div class="event-image-wrapper">
      <img
        class="event-image"
        [src]="vm().cover.src"
        [srcset]="vm().cover.srcset!"
        [sizes]="vm().cover.sizesAttr!"
        [alt]="vm().cover.alt"
        loading="lazy"
        decoding="async"
      />
    </div>
    } @else {
    <div class="event-image-wrapper">
      <img
        class="event-image"
        [src]="vm().cover.src"
        [alt]="vm().cover.alt || 'Brak okładki'"
        loading="lazy"
        decoding="async"
      />
    </div>
    }

    <div class="event-description">
      @let paragraphs = (vm().event?.longDescription ?? '').split('\n'); @for
      (paragraph of paragraphs; let i = $index; track i) { @if
      (paragraph.trim().length) {
      <p class="event-paragraph">{{ paragraph }}</p>
      } }
    </div>

    <table class="table table-dark-style align-middle font-size-small">
      <tbody>
        <tr>
          <th scope="row">
            {{ vm().event?.recurrence ? "Następna data:" : "Data spotkania:" }}
          </th>
          <td>
            @if (vm().event?.singleDate) {
            {{ vm().event?.singleDate | date : "dd.MM.yyyy" }}
            } @else { — }
          </td>
        </tr>

        <tr>
          <th scope="row">Godzina rozpoczęcia:</th>
          <td>{{ (vm().event?.startTime ?? "").substring(0, 5) }}</td>
        </tr>

        <tr>
          <th scope="row">Godzina zakończenia:</th>
          <td>{{ (vm().event?.endTime ?? "").substring(0, 5) }}</td>
        </tr>

        <tr>
          <th scope="row">Strefa czasowa:</th>
          <td>{{ vm().event?.timezone }}</td>
        </tr>

        <tr>
          <th scope="row">Koszt uczestnictwa:</th>
          <td>
            <span class="text-muted">Do ustalenia</span>
            <!-- TODO: po dodaniu pola cost do EventFull, podmień na realną wartość -->
          </td>
        </tr>

        <tr>
          <th scope="row">Link do wydarzenia:</th>
          <td>
            @if (vm().event?.facebookLink) {
            <button
              class="btn btn-info btn-sm"
              (click)="openFacebook(vm().event?.facebookLink!)"
            >
              Zobacz na Facebooku
            </button>
            } @else {
            <span>Brak wydarzenia</span>
            }
          </td>
        </tr>

        @if (vm().tagBadges.length) {
        <tr>
          <th scope="row" class="td-40">Tagi:</th>
          <td class="td-60">
            <div class="tag-badges">
              @for (t of vm().tagBadges; track t.key) {
              <span class="tag-badge {{ t.cssClass }}">{{ t.label }}</span>
              }
            </div>
          </td>
        </tr>
        } @if (vm().event?.rooms?.length) {
        <tr>
          <th scope="row" class="td-40">Sale:</th>
          <td class="td-60">
            <div class="rooms-grid">
              @for (room of vm().event?.rooms; track room) {
              <span class="tag-badge muted room-badge">{{ room }}</span>
              }
            </div>
          </td>
        </tr>
        }

        <tr>
          <th scope="row">Dla początkujących:</th>
          <td>{{ vm().event?.isForBeginners ? "Tak" : "Nie" }}</td>
        </tr>

        <tr>
          <th scope="row">Wymaga prowadzących:</th>
          <td>{{ vm().event?.requiresHosts ? "Tak" : "Nie" }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
} @else if (vm().error) {
<ngb-alert type="danger">{{ vm().error }}</ngb-alert>
} @else if (vm().loading) {
<p>Ładowanie…</p>
}
