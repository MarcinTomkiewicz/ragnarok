<div class="time-selection-wrapper">
  <h2 class="section-title">Wybierz godzinę rozpoczęcia</h2>

  <div class="hour-grid">
    @for (slot of timeSlots(); track slot.hour) {
    <button
      class="btn btn-outline m-1"
      [disabled]="!slot.available"
      [class.active]="selectedTime() === slot.hour + ':00'"
      (click)="selectTime(slot.hour)"
    >
      {{ slot.hour }}:00
    </button>
    }
  </div>

  @if (selectedTime()) {
  <div class="duration-picker mt-4">
    <h3 class="section-title">Wybierz długość rezerwacji</h3>
    @for (d of getDurationsFrom(selectedHour!); track d) {
    <button
      class="btn btn-outline m-1"
      [class.active]="selectedDuration() === d"
      (click)="selectedDuration.set(d)"
    >
      {{ d }}h
    </button>
    }

    <div class="form-check mt-3">
      <input
        class="form-check-input"
        type="checkbox"
        [checked]="needsGm()"
        (change)="toggleNeedsGm()"
        id="needsGmCheck"
      />
      <label class="form-check-label" for="needsGmCheck">
        Potrzebuję Mistrza Gry
      </label>
    </div>
  </div>

  }
  <div class="d-flex justify-content-center gap-4 mt-4 w-100">
    <button class="btn btn-primary mt-3" (click)="handleBack()">Wstecz</button>
    <button
      class="btn btn-primary mt-3"
      (click)="confirm()"
      [disabled]="!isTimeAndDurationSelected()"
    >
      Dalej
    </button>
  </div>
</div>
